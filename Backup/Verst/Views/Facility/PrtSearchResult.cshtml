@using MvcApplication.Models
@using Verst.Models
@model IEnumerable<Verst.Models.PartSearch>
           
@{
    ViewBag.Title = "Результаты поиска";
    Layout = Request.IsAjaxRequest() != true ? "~/Views/Shared/_Layout.cshtml" : null;
    string prodN = FoxRepo.GetProductionNumber();
    string userName = HttpContext.Current.User.Identity.Name;
}
<script src="@Url.Content("~/Scripts/Tooltip.js")" type="text/javascript"></script>

 @Html.TrackThisBatchScript(prodN,userName)
@{
    if (Model.Any())
    {
        <h2>Результаты поиска партии <span style="color: #3019FF">№ @Html.ActionLink(Model.First().Nprt, "PartInfo", "Facility", new { NPRT = Model.First().Nprt }, new { target = "_blank" }) @Html.TrackThisBatch(Model.First().Nprt, prodN, userName)</span></h2>
        try
        {
            <div>
                <table class="table table-bordered table-condensed">
                    <tr>
                        <th class="Font14">Код прибора:</th>
                        <td class="Font14">@Model.First().Kpr</td>
                        <th class="Font14">Наим. прибора:</th>
                        <td class="Font14">@Model.First().Napr</td>
                    </tr>
                    <tr>
                        <th class="Font14">Номер операции:</th>
                        <td class="Font14">@Model.First().Nop</td>
                        <th class="Font14">Наим. операции:</th>
                        <td class="Font14">@Model.First().Naop</td>
                    </tr>
                    <tr>
                        <th class="Font14">Кол-во пластин</th> 
                        <td class="Font14">@Model.First().Kpls</td> 
                        <th class="Font14">Наименование коридора</th>
                        <td class="Font14">@Model.First().Nakor</td>
                    </tr>
                    <tr>
                        <th class="Font14">Время/Дата запуска</th>
                        <td class="Font14">@Model.First().Timh/@Model.First().Dath</td> 
                        <th class="Font14">Время/Дата поступ.</th>
                        <td class="Font14">@Model.First().Timo/@Model.First().Dato</td> 

                    </tr>
                </table>
                
                Наименование установок
           <p> @foreach (var item in Model)
               {
               <div style="float: left;white-space: pre;"> @item.Nobr; </div>
               }
            </div>
        }
        catch (Exception ex)
        {
            <div>
                <h2>Ошибка! Поиск не дал результатов!</h2>
                <p>Проверьте правильность вводимых данных и попробуйте ещё раз.</p>
            </div>
        }
    }
    else
    {
        <h2>Результаты поиска партии №@ViewBag.Nprt:</h2>
        <div>
            <h2>Поиск не дал результатов!</h2>
            <p>Проверьте правильность вводимых данных и попробуйте ещё раз.</p>
        </div>
    }
}
