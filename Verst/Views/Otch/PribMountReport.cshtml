@using MvcApplication.Models
@model IEnumerable<Verst.Models.SimplePribList>

@{
    ViewBag.Title = "Отчёт по приборам за месяц";
    Layout = Request.IsAjaxRequest() != true ? "~/Views/Shared/_Layout.cshtml" : null;
}

@Html.Hidden("PageTitle", "Отчёт по приборам за месяц")

<script src="@Url.Content("~/Scripts/CommonScripts.js")" type="text/javascript"></script>
<script type="text/javascript">
    $.get('@Url.Action("Sidemenu","Home")').success(function (result) { $('#SideMenu').html(result); });
    $('#SideMenu').show();
     var  $objKpr, $objNfl, $objNop;
     $(document).ready(function () {

      
         $('.PribMountPeport').live("click", function() {
             if (typeof $objKpr != 'undefined') {
                 $objKpr.closest('tr').css("background-color", "white");
             }
             $objKpr = $(this);
             $objKpr.closest('tr').css("background", "#ADDEFF");

         });
         $('.GetDataBySelectedPrib').live("click", function () {
             if (typeof $objNfl != 'undefined') {
                 $objNfl.closest('tr').css("background-color", "white");
             }
             $objNfl = $(this);
             $objNfl.closest('tr').css("background", "#ADDEFF");
            
         });
     });
    function load(n) {
        for (var i = n; i <= 3; i++) {
            $("#PribMounthRepordData" + i).html("");
        }
        $("#PribMounthRepordData" + n).addClass("loader1");    
    }
</script>

<div class="lighttable center">
    <div >
        <h4>Отчёт по приборам производства №@FoxRepo.GetProductionNumber() за месяц</h4>
    </div>
    <div style="float:left">
        <div style="width: 162px;height: 41px" >
            <table class="table table-bordered table-condensed" style="table-layout:fixed;">
                <thead>
                    <tr>
                        <th style="width: 32px">Код</th>
                        <th style="width: 94px">Наименование прибора</th>
                        <th style="width: 32px">НЗП</th>
                    </tr>
                </thead>
            </table> 
        </div>        
        <div class="scrollable" style="width: 180px;height: 480px"> 
            <table class="table table-bordered table-condensed"style="table-layout:fixed;width:162px; ">
                <tbody>
                    @foreach (var item in Model)
                    {
                       <tr id="@item.Kpr">
                           <td style="width: 32px;">@item.Kpr</td>
                           <td style="width: 94px;">@item.Napr</td>
                           <td style="width: 32px;">@Ajax.ActionLink(item.Nzp.ToString(), "GetDataBySelectedPrib", new { selPrib = item.Kpr }, new AjaxOptions { UpdateTargetId = "PribMounthRepordData2", InsertionMode = InsertionMode.Replace, OnBegin = "load(2)", OnSuccess = "AjaxSuccessEnd(2)", OnFailure = "AjaxError()" }, new {@class="PribMountPeport" })</td>
                       </tr>
                   }
               </tbody>
           </table>
       </div>
    </div>
    
    <div id="PribMounthRepordData2" style="float: left;width:470px; height: 550px; padding-left: 10px;*padding-left: 5px"></div>
    <div id="PribMounthRepordData3" style="float: left;width:460px;height: 500px;margin-left: 5px;*margin-left: 160px"></div>

</div>

